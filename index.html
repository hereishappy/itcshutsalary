<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Salary Slip</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { -webkit-font-smoothing: antialiased; }
    @media print {
      .no-print { display: none !important; }
      body { background: white !important; }
    }
  </style>
</head>

<body class="min-h-screen bg-slate-50 text-slate-900">
  <div class="max-w-xl mx-auto p-4">

    <header class="no-print mb-4 text-center">
      <h1 class="text-2xl font-bold">Salary Slip</h1>
    </header>

    <main>

      <!-- Search Box Only -->
      <section class="no-print mb-4">
        <label class="block text-sm mb-2 font-medium">Gate Pass Number</label>
        <div class="flex gap-2">
          <input id="searchInput" type="text" placeholder="Enter Gate Pass"
            class="flex-1 rounded-md border border-slate-300 px-3 py-2 focus:ring-2 focus:ring-indigo-300" />
          <button id="searchBtn" class="px-4 py-2 rounded-md bg-indigo-600 text-white font-medium">
            Search
          </button>
        </div>
      </section>

      <!-- Result Area -->
      <section id="resultArea" class="rounded-2xl p-4 shadow-sm border bg-white">
        <div id="notFound" class="text-center py-12">
          <p class="text-slate-600">Enter Gate Pass and press Search.</p>
        </div>

        <div id="slip" class="hidden">
          <div class="flex justify-between mb-4">
            <div>
              <h2 class="text-lg font-bold" id="employeeName">--</h2>
              <p class="text-sm text-slate-500" id="designation">--</p>
            </div>
            <div class="text-right text-sm">
              <p id="sno">S.No: --</p>
              <p id="gatePass">Gate Pass: --</p>
              <p id="empCode">Emp Code: --</p>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-3 text-sm mb-3">
            <div class="p-3 border rounded">
              <div class="text-xs text-slate-500">Worked Days</div>
              <div id="workedDays" class="text-base font-semibold">0</div>
            </div>
            <div class="p-3 border rounded">
              <div class="text-xs text-slate-500">OT Hrs</div>
              <div id="otHrs" class="text-base font-semibold">0</div>
            </div>
            <div class="p-3 border rounded">
              <div class="text-xs text-slate-500">Gross</div>
              <div id="gross" class="text-base font-semibold">0</div>
            </div>
            <div class="p-3 border rounded">
              <div class="text-xs text-slate-500">Net Payable</div>
              <div id="netPayable" class="text-base font-semibold">0</div>
            </div>
          </div>

          <div class="overflow-x-auto border rounded">
            <table class="min-w-full text-sm divide-y">
              <thead class="bg-slate-50 text-xs text-slate-600">
                <tr>
                  <th class="px-3 py-2 text-left">Component</th>
                  <th class="px-3 py-2 text-right">Amount</th>
                </tr>
              </thead>
              <tbody id="components" class="divide-y"></tbody>
              <tfoot class="bg-slate-50 text-sm">
                <tr>
                  <td class="px-3 py-2 font-medium">Total Deductions</td>
                  <td class="px-3 py-2 text-right font-medium" id="totalDeductions">0</td>
                </tr>
                <tr>
                  <td class="px-3 py-2 font-bold">Net Payable</td>
                  <td class="px-3 py-2 text-right font-bold" id="netPayableFooter">0</td>
                </tr>
              </tfoot>
            </table>
          </div>

          <div class="mt-4 flex gap-2 no-print">
            <button id="printBtn" class="px-4 py-2 rounded bg-green-600 text-white">Print / PDF</button>
            <button id="downloadBtn" class="px-4 py-2 rounded bg-slate-200">Download JSON</button>
            <button id="clearBtn" class="px-3 py-2 rounded bg-red-200 text-red-700">Clear</button>
          </div>

        </div>
      </section>

    </main>
  </div>

  <script>
    /* KEEPING YOUR ORIGINAL DATASET */
    const DATA_CSV = `S.No,Emp Code,Gate Pass,Name of the Employee,Designation,Worked Days,OT Hrs,Gross,PF,ESI,PT,Any other recovery,Salary Advance,Total Deductions,Net Payable
1,189654.00,PZF0534,Neeraj Kumar Chauhan,Scaffolder,10,19,12074,0,0,0,0,0,0,12074
2,181233-2,PZF0546,Deepak  Chauhan,Scaffolder,10,16,11530,0,0,0,0,0,0,11530
3,189497,PZF0497,Sk Mustakin Mustakin,Trainee Scaffolder,14,21,13268,0,100,0,0,2000,2100,11168
4,175975-2,PZF0523,Tilanand Kumar Singh,Scaffolder,12,20,13981,996,0,0,250,2000,3246,10735
5,168873-3,PZF0465,Sk Samim Aktar,Scaffolder,20,27,22366,0,0,0,0,2000,2000,20366
6,184570,PZF0558,Rahul  .,Scaffolder,5,7,5628,415,0,0,0,0,415,5213
7,106314-10,PZF0542,Vijay  Chauhan,Foreman,10,21,14507,0,0,0,0,0,0,14507
8,176118,PZF0536,Dharm  Raj,Scaffolder,11,16,12468,0,0,0,0,0,0,12468
9,189200,PZF0461,Ankit  Sharma,Trainee Scaffolder,21,9,16648,0,125,0,0,2000,2125,14523
10,189205,PZF0494,Supriya  Mahata,Trainee Scaffolder,17,6,13291,0,100,0,0,2000,2100,11191
11,189215,PZF0467,Vishnu  Thakur,Trainee Scaffolder,15,10,12407,1041,94,0,0,2000,3135,9272
12,189051,PZF0473,Sk  Taher,Scaffolder,15,25,17512,1577,0,150,0,0,1727,15785
13,184409-2,PZF0496,Sk Saddam  Hossen,Scaffolder,14,36,18131,0,0,0,0,2000,2000,16131
14,182331,PZF0481,Sk Ali  Akbar,Scaffolder,15,36,19053,1577,0,150,0,0,1727,17326
15,189960,PZF0533,Dhiraj  Kumar,Trainee Scaffolder,9,22,9759,625,74,0,250,0,949,8810
16,189557,PZF0502,Bageshwar  Gupta,Foreman,9,23,13774,857,0,0,1120,2000,3977,9797
17,183948,PZF0511,Mr.  Pradum,Scaffolder,11,17,12675,913,0,0,271,2000,3184,9491
18,134525-2,PZF0515,Deepak  Prasad,Scaffolder,11,16,12468,913,0,0,0,0,913,11555
19,189969,PZF0520,Ravindra Kumar Kushwaha,Scaffolder,8,9,8724,664,0,0,2000,0,2664,6060
20,189977,PZF0518,Shravan  Oraon,Scaffolder,7,11,8142,581,0,0,500,0,1081,7061
21,189935,PZF0510,Umesh  Agariya,Scaffolder,8,13,9356,664,0,0,500,0,1164,8192
22,184423-2,PZF0495,Sk  Saklin,Scaffolder,14,36,18131,0,0,0,0,2000,2000,16131
23,105635-3,PZF0543,Surendra Chauhan Chauhan,Scaffolder,9,18,10986,0,0,0,0,0,0,10986
24,184421,PZF0466,Sk Anisuddin Rahaman,Scaffolder,22,39,25949,0,0,0,0,2000,2000,23949
25,169573-3,PZF0560,Uday Narayan Chauhan,Scaffolder,5,7,5628,415,0,0,0,0,415,5213
26,185732,,Anish Kumar Singh,Safety Supervisor,5,0,6155,0,0,0,0,0,0,6155
27,189967,PZF0529,Sintu  Kumar,Trainee Scaffolder,10,21,10344,694,78,0,656,0,1428,8916
28,190011,PZF0544,Mahesh Chauhan Chauhan,Trainee Scaffolder,11,19,10813,0,82,0,0,0,82,10731
29,182438-2,PZF0447,Rahul Singh Chouhan,Scaffolder,25,19,25917,1800,0,200,0,2000,4000,21917
30,189972,PZF0559,Sundaram  Maurya,Scaffolder,5,7,5628,415,0,0,0,0,415,5213
31,187617,PZF0505,Jitendra  Kumar,Scaffolder,10,26,13070,830,0,0,271,2000,3101,9969
32,118342-2,PZF0551,Lalbabu  .,Scaffolder,10,20,12202,0,0,0,0,0,0,12202
33,189855,PZF0521,Vijay  Uraw,Scaffolder,12,22,14299,996,0,0,890,0,1886,12413
34,186359,PZF0482,Siraz  Shah,Scaffolder,15,34,18763,1644,0,150,0,0,1794,16969
35,189206,PZF0489,Bikas Chandra Mahato,Trainee Scaffolder,17,7,13435,0,101,0,0,2000,2101,11334
36,189335,PZF0475,Vivek  Kumar,Scaffolder,13,8,13158,0,0,0,0,2000,2000,11158
37,189255,PZF0469,Ramdeo  Kumar,Trainee Scaffolder,22,32,20705,1527,156,200,0,2000,3883,16822
38,150769-3,PZF0471,Manish Kumar  Thakur,Scaffolder,18,5,17339,0,0,0,1000,2000,3000,14339
39,148662-3,PZF0468,Bablu  Kumar,Scaffolder,22,5,21087,0,0,0,0,2000,2000,19087
40,183871,PZF0456,Suraj Kumar  Singh,Scaffolder,12,9,12378,996,0,0,0,2000,2996,9382
41,165427-2,PZF0512,Pinku  Yadav,Foreman,12,22,16834,1142,0,150,0,2000,3292,13542
42,189473,PZF0537,Rambilash  .,Scaffolder,11,18,12837,0,0,0,0,0,0,12837
43,189478,PZF0545,Pankaj  Kumar,Scaffolder,10,15,11445,0,0,0,0,0,0,11445
44,190012,,Roshan Chauhan Chauhan,Scaffolder,10,17,11689,0,0,0,0,0,0,11689
45,156124-3,PZF0454,Rakesh  .,Scaffolder,25,45,29585,1736,0,200,0,2000,3936,25649
46,174896,PZF0554,Balkar  Masih,Supervisor,17,0,23314,1800,0,200,0,0,2000,21314
47,189992,PZF0531,Yougendra  Yadav,Trainee Scaffolder,12,17,11211,833,85,0,0,0,918,10293
48,184373,PZF0448,Shesh Mani Chauhan,Scaffolder,23,5,22046,1800,0,200,0,2000,4000,18046
49,187616,PZF0463,Dipak  Kumar,Trainee Scaffolder,10,12,9043,694,68,0,0,0,762,8281
50,189515,,Ajay  Kumar,Trainee Scaffolder,15,21,13998,1041,105,0,250,2000,3396,10602
51,189476,PZF0541,Abhishek  Kumar,Scaffolder,11,19,12991,0,0,0,0,0,0,12991
52,189551,PZF0500,Rahul Kumar Gupta,Scaffolder,9,23,11610,747,0,0,1000,2000,3747,7863
53,181231-2,PZF0540,Bajarangi  Bajarangi,Scaffolder,10,14,11308,0,0,0,0,0,0,11308
54,168486-2,PZF0486,Rohit Kumar Singh,Scaffolder,15,30,18178,1245,0,150,406,2000,3801,14377
55,189556,PZF0501,Upendra  Uraon,Scaffolder,12,22,14292,996,0,0,890,2000,3886,10406
56,110228-4,PZF0477,Chittaranjan Ranjan Ranjanbehura,Foreman,15,15,18815,1427,0,150,0,2000,3577,15238
57,189199,PZF0459,Mr  Sanjay,Trainee Scaffolder,22,16,18391,1527,138,150,0,2000,3815,14576
58,168711-2,PZF0472,Ravi Kumar Thakur,Scaffolder,21,17,21855,1743,0,200,0,2000,3943,17912
59,189555,PZF0517,Vinod  Ram,Scaffolder,12,20,14072,996,0,0,1540,2000,4536,9536
60,168605-2,PZF0487,Shankar Kumar Thakur,Scaffolder,15,30,18185,1245,0,150,406,2000,3801,14384
61,183418,PZF0556,Amit  Masih,Scaffolder,17,21,18835,1800,0,150,0,0,1950,16885
62,189981,PZF0509,Ramkishun  Ram,Scaffolder,9,13,10265,747,0,0,500,0,1247,9018
63,188840,PZF0483,Sk  Sanealam,Trainee Scaffolder,15,27,14866,1371,112,0,0,0,1483,13383
64,189553,PZF0507,Aravind  Kumar,Scaffolder,11,12,11890,913,0,0,1540,2000,4453,7437
65,189554,PZF0503,Ramesh  Kumar,Scaffolder,9,23,11680,747,0,0,1540,2000,4287,7393
66,110536-8,PZF0562,Saravan  .,Scaffolder,6,6,6419,498,0,0,0,0,498,5921
67,117792-7,PZF0563,Ravi  Raj,Scaffolder,5,7,5628,415,0,0,0,0,415,5213
68,189936,PZF0532,Md  Ajim,Trainee Scaffolder,9,19,9325,625,70,0,0,0,695,8630
69,189472,PZF0553,Rambabu  .,Scaffolder,11,10,11617,0,0,0,0,0,0,11617
70,189980,PZF0547,Rajendra  Ram,Scaffolder,7,10,7923,581,0,0,500,0,1081,6842
71,189195,PZF0458,Prithvi Raj Chauhan,Trainee Scaffolder,24,20,20533,1666,154,200,0,2000,4020,16513
72,177509-2,PZF0539,Dheeraj Kumar Yadav,Scaffolder,10,14,11306,0,0,0,0,0,0,11306
73,185091,PZF0478,Krishnapada  Singh,Scaffolder,17,7,16704,0,0,0,0,2000,2000,14704
74,176155-2,,Ajay  Kumar,Scaffolder,11,21,13191,0,0,0,0,0,0,13191
75,184382,PZF0514,Ranjit  Singh,Scaffolder,11,3,10648,913,0,0,271,2000,3184,7464
76,189958,PZF0548,Azad  Kumar,Trainee Scaffolder,8,18,8449,555,64,0,0,0,619,7830
77,176175-2,PZF0549,Jai  Singh,Scaffolder,11,18,12772,1632,0,0,0,0,1632,11140
78,117516-3,PZF0527,Sunil  Kumar,Scaffolder,11,17,12613,913,0,0,750,0,1663,10950
79,187632,PZF0504,Shiv  .,Trainee Scaffolder,11,2,8393,764,63,0,271,2000,3098,5295
80,186358,PZF0484,Rajak Ali Shah,Scaffolder,15,27,17862,1644,0,150,0,0,1794,16068
81,189208,PZF0476,Dilip Kumar Sing,Scaffolder,17,8,16849,0,0,0,0,2000,2000,14849
82,182778,PZF0453,Sujeet  Kumar,Scaffolder,21,13,21264,1743,0,200,0,2000,3943,17321
83,189202,PZF0462,Sonu  Kumar,Trainee Scaffolder,25,44,24633,1736,185,200,0,2000,4121,20512
84,179972,PZF0555,Sourav  Dhapa,Scaffolder,17,21,18835,1800,0,150,0,0,1950,16885
85,138850-7,PZF0449,Dhiraj  .,Foreman,17,31,23807,1618,0,200,0,2000,3818,19989
86,149119-3,PZF0450,Bharat  Kumar,Scaffolder,22,31,24792,1800,0,200,0,2000,4000,20792
87,182481,PZF0525,Sumit . Kumar,Trainee Scaffolder,11,22,11308,0,85,0,0,0,85,11223
88,175567-3,PZF0513,Janmejay  Singh,Scaffolder,9,3,8761,747,0,0,271,2000,3018,5743
89,189968,PZF0561,Suraj  Kumar,Scaffolder,5,7,5628,415,0,0,0,0,415,5213
90,159583-3,PZF0451,Shyam  Sundra,Scaffolder,22,14,22333,0,0,0,0,2000,2000,20333
91,189982,PZF0508,Sanjay  Ram,Scaffolder,10,13,11192,830,0,0,500,0,1330,9862
92,181662,PZF0526,Ankit  Kumar,Scaffolder,11,23,13567,913,0,0,250,2000,3163,10404
93,189197,PZF0457,Ram Murat Singh,Trainee Scaffolder,24.5,45,24451,1701,184,200,0,2000,4085,20366
94,189201,PZF0460,Nikhil  Singh,Trainee Scaffolder,22,26,19837,1527,149,150,0,2000,3826,16011
95,182116-2,PZF0538,Jayprakash  Jayprakash,Scaffolder,11,19,12960,0,0,0,0,0,0,12960
96,189198,PZF0464,Akash  Chauhan,Trainee Scaffolder,21,31,19830,1458,149,150,0,2000,3757,16073
97,189957,PZF0550,Arbind  Kumar,Scaffolder,6,9,6952,498,0,0,0,0,498,6454
98,186361,PZF0499,Deendayal  Uraon,Scaffolder,9,24,11779,747,0,0,1540,2000,4287,7492
99,142623-3,PZF0474,Firoz  Khan,Foreman,20,19,24928,1800,0,200,0,2000,4000,20928
100,189938,PZF0528,Ram  Babu,Trainee Scaffolder,10,17,9744,694,74,0,271,0,1039,8705
101,189235,PZF0480,Aman  Kumar,Trainee Scaffolder,15,4,11540,0,87,0,0,0,87,11453
102,189939,PZF0530,Vijay  Babu,Trainee Scaffolder,10,2,7630,694,58,0,271,0,1023,6607
103,189203,PZF0492,Chandan  Kumar,Trainee Scaffolder,15,9,12263,0,92,0,1000,2000,3092,9171
104,177616-2,PZF0455,Ravi  Kumar,Scaffolder,25,35,28139,1800,0,200,0,2000,4000,24139
105,189991,PZF0506,Gulab  Uraon,Scaffolder,12,21,14214,996,0,0,890,0,1886,12328
106,175172-2,PZF0522,Anil  Kumar,Scaffolder,11,21,13191,913,0,0,250,2000,3163,10028
107,153621-3,PZF0479,Sk Rajibul  Islam,Scaffolder,15,31,18330,0,0,0,0,2000,2000,16330
108,184383,PZF0452,Ankit  Singh,Scaffolder,24,4,22733,1800,0,200,0,2000,4000,18733
109,189552,PZF0519,Ashok  Kumar,Scaffolder,8,6,8254,664,0,0,1540,2000,4204,4050
110,189337,PZF0485,Janealam  Shah,Trainee Scaffolder,15,23,14287,0,108,0,0,2000,2108,12179
111,116377-2,PZF0498,Baban  Uraon,Scaffolder,12,26,14836,996,0,0,890,0,1886,12950
`;

    function parseCSV(csv) {
      const lines = csv.trim().split(/\r?\n/);
      const header = lines[0].split(",");
      return lines.slice(1).map(line => {
        const p = line.split(",");
        const obj = {};
        header.forEach((h, i) => obj[h.trim()] = p[i]?.trim());
        return obj;
      });
    }

    const raw = parseCSV(DATA_CSV);
    const employees = raw.map((r, i) => ({
      SNo: r["S.No"] || (i+1),
      EmpCode: r["Emp Code"],
      GatePass: r["Gate Pass"],
      Name: r["Name of the Employee"],
      Designation: r["Designation"],
      WorkedDays: Number(r["Worked Days"]) || 0,
      OTHrs: Number(r["OT Hrs"]) || 0,
      Gross: Number(r["Gross"]) || 0,
      PF: Number(r["PF"]) || 0,
      ESI: Number(r["ESI"]) || 0,
      PT: Number(r["PT"]) || 0,
      AnyOtherRecovery: Number(r["Any other recovery"]) || 0,
      SalaryAdvance: Number(r["Salary Advance"]) || 0,
      TotalDeductions: Number(r["Total Deductions"]) || 0,
      NetPayable: Number(r["Net Payable"]) || 0,
    }));

    const mapByGate = {};
    employees.forEach(e => mapByGate[e.GatePass?.toLowerCase()] = e);

    const slip = document.getElementById("slip");
    const nf = document.getElementById("notFound");

    function showSlip(emp) {
      if (!emp) {
        slip.classList.add("hidden");
        nf.classList.remove("hidden");
        return;
      }

      nf.classList.add("hidden");
      slip.classList.remove("hidden");

      document.getElementById("employeeName").textContent = emp.Name;
      document.getElementById("designation").textContent = emp.Designation;
      document.getElementById("sno").textContent = "S.No: " + emp.SNo;
      document.getElementById("gatePass").textContent = "Gate Pass: " + emp.GatePass;
      document.getElementById("empCode").textContent = "Emp Code: " + emp.EmpCode;

      document.getElementById("workedDays").textContent = emp.WorkedDays;
      document.getElementById("otHrs").textContent = emp.OTHrs;
      document.getElementById("gross").textContent = emp.Gross;
      document.getElementById("netPayable").textContent = emp.NetPayable;

      document.getElementById("totalDeductions").textContent = emp.TotalDeductions;
      document.getElementById("netPayableFooter").textContent = emp.NetPayable;

      const comp = document.getElementById("components");
      comp.innerHTML = `
        <tr><td class="px-3 py-2">Gross Salary</td><td class="px-3 py-2 text-right">${emp.Gross}</td></tr>
        <tr><td class="px-3 py-2">PF</td><td class="px-3 py-2 text-right">${emp.PF}</td></tr>
        <tr><td class="px-3 py-2">ESI</td><td class="px-3 py-2 text-right">${emp.ESI}</td></tr>
        <tr><td class="px-3 py-2">PT</td><td class="px-3 py-2 text-right">${emp.PT}</td></tr>
        <tr><td class="px-3 py-2">Other Recovery</td><td class="px-3 py-2 text-right">${emp.AnyOtherRecovery}</td></tr>
        <tr><td class="px-3 py-2">Salary Advance</td><td class="px-3 py-2 text-right">${emp.SalaryAdvance}</td></tr>
      `;
    }

    document.getElementById("searchBtn").onclick = () => {
      const gp = document.getElementById("searchInput").value.trim().toLowerCase();
      showSlip(mapByGate[gp]);
    };

    document.getElementById("clearBtn").onclick = () => {
      slip.classList.add("hidden");
      nf.classList.remove("hidden");
      document.getElementById("searchInput").value = "";
    };

    document.getElementById("printBtn").onclick = () => window.print();

    document.getElementById("downloadBtn").onclick = () => {
      const gp = document.getElementById("gatePass").textContent.split(": ")[1];
      const emp = mapByGate[gp.toLowerCase()];
      const blob = new Blob([JSON.stringify(emp, null, 2)], { type: "application/json" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = gp + ".json";
      a.click();
    };
  </script>

</body>
</html>
